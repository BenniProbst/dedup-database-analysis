{
    "lab_user": "dedup-lab",
    "lab_schema": "dedup_lab",
    "data_dir": "/tmp/datasets",
    "results_dir": "results",
    "replica_count": 4,
    "dry_run": false,
    "db_internal_metrics": true,

    "databases": [
        {
            "system": "postgresql",
            "host": "postgres-lb.databases.svc.cluster.local",
            "port": 5432,
            "user": "dedup-lab",
            "password": "",
            "database": "postgres",
            "lab_schema": "dedup_lab",
            "pvc_name": "data-postgres-ha-0",
            "k8s_namespace": "databases",
            "max_experiment_bytes": 0,
            "_comment": "50 GiB Longhorn PVC, replica 4"
        },
        {
            "system": "cockroachdb",
            "host": "cockroachdb-public.cockroach-operator-system.svc.cluster.local",
            "port": 26257,
            "user": "dedup_lab",
            "password": "",
            "database": "dedup_lab",
            "lab_schema": "dedup_lab",
            "pvc_name": "datadir-cockroachdb-0",
            "k8s_namespace": "cockroach-operator-system",
            "max_experiment_bytes": 53687091200,
            "_comment": "125 GiB PVC shared with production. Experiment limited to 50 GiB."
        },
        {
            "system": "redis",
            "host": "redis-cluster.redis.svc.cluster.local",
            "port": 6379,
            "pvc_name": "data-redis-cluster-0",
            "k8s_namespace": "redis",
            "max_experiment_bytes": 0,
            "_comment": "50 GiB Longhorn PVC, cluster mode, key prefix dedup:*"
        },
        {
            "system": "kafka",
            "host": "kafka-cluster-kafka-bootstrap.kafka.svc.cluster.local",
            "port": 9094,
            "user": "dedup-lab",
            "password": "",
            "lab_schema": "dedup-lab",
            "pvc_name": "data-kafka-cluster-broker-0",
            "k8s_namespace": "kafka",
            "max_experiment_bytes": 0,
            "_comment": "50 GiB Longhorn PVC per broker, SCRAM-SHA-512 on port 9094, topic prefix dedup-lab-*"
        },
        {
            "system": "minio",
            "host": "minio-lb.minio.svc.cluster.local",
            "port": 9000,
            "user": "dedup-lab-s3",
            "password": "",
            "lab_schema": "dedup-lab",
            "pvc_name": "",
            "k8s_namespace": "minio",
            "max_experiment_bytes": 0,
            "_comment": "Direct Disk (no Longhorn PVC). LDAP Access Key."
        },
        {
            "system": "mariadb",
            "host": "mariadb.databases.svc.cluster.local",
            "port": 3306,
            "user": "dedup-lab",
            "password": "",
            "database": "dedup_lab",
            "lab_schema": "dedup_lab",
            "pvc_name": "data-mariadb-0",
            "k8s_namespace": "databases",
            "max_experiment_bytes": 0,
            "_comment": "50 GiB Longhorn PVC, replica 4. Deployed: 4 replicas (StatefulSet)."
        },
        {
            "system": "clickhouse",
            "host": "clickhouse.databases.svc.cluster.local",
            "port": 8123,
            "user": "dedup-lab",
            "password": "",
            "database": "dedup_lab",
            "lab_schema": "dedup_lab",
            "pvc_name": "data-clickhouse-0",
            "k8s_namespace": "databases",
            "max_experiment_bytes": 0,
            "_comment": "50 GiB Longhorn PVC, replica 4, HTTP API. Deployed: 4 replicas (StatefulSet)."
        },
        {
            "system": "comdare-db",
            "host": "comdare-db.databases.svc.cluster.local",
            "port": 8080,
            "lab_schema": "dedup_lab",
            "pvc_name": "",
            "k8s_namespace": "databases",
            "max_experiment_bytes": 0,
            "_comment": "OPTIONAL: Requires cmake -DENABLE_COMDARE_DB=ON. REST API metrics."
        }
    ],

    "dup_grades": ["U0", "U50", "U90"],

    "payload_types": [
        "random_binary",
        "structured_json",
        "text_document",
        "uuid_keys",
        "jsonb_documents",
        "nasa_image",
        "blender_video",
        "gutenberg_text",
        "github_events",
        "bank_transactions",
        "text_corpus",
        "numeric_dataset"
    ],
    "_payload_types_comment": "Full factorial: each type gets own data_dir/{type}/{U0,U50,U90}/",

    "data_sources": {
        "cache_dir": "/tmp/dedup-datasets-cache",
        "real_world_dir": "/datasets/real-world",
        "nasa_hudf_url": "https://stsci-opo.org/STScI-01EVST5CZG5BK2MAJQFCY2QHVS.tif",
        "nasa_api_url": "https://images-api.nasa.gov",
        "blender_urls": [
            "https://download.blender.org/peach/bigbuckbunny_movies/BigBuckBunny_320x180.mp4",
            "https://download.blender.org/durian/movies/Sintel.2010.1080p.mkv",
            "https://download.blender.org/mango/download/ToS-4k-1920.mov"
        ],
        "gutenberg_ids": [1342, 2701],
        "gutenberg_mirror": "https://www.gutenberg.org/cache/epub",
        "gharchive_base_url": "https://data.gharchive.org/",
        "_comment": "Real-world data sources from doku.tex §6.3. Downloaded + cached on first use."
    },

    "prometheus": {
        "url": "http://kube-prometheus-stack-prometheus.monitoring.svc.cluster.local:9090",
        "_comment": "kube-prometheus-stack deployed to monitoring namespace."
    },

    "grafana": {
        "url": "http://pushgateway-prometheus-pushgateway.monitoring.svc.cluster.local:9091",
        "api_key": "",
        "dashboard_uid": "",
        "_comment": "URL points to Pushgateway — C++ pushes metrics there, Prometheus scrapes it."
    },

    "metrics_trace": {
        "kafka_bootstrap": "kafka-cluster-kafka-bootstrap.kafka.svc.cluster.local:9094",
        "kafka_topic": "dedup-lab-metrics",
        "events_topic": "dedup-lab-events",
        "sample_interval_ms": 100,
        "enabled": true,
        "_comment": "10 Hz sampling for ALL DB metrics, persisted to Kafka + Grafana"
    },

    "git_export": {
        "remote_name": "gitlab",
        "branch": "development",
        "auto_push": true,
        "ssl_verify": false,
        "_comment": "Export results to GitLab BEFORE cleanup. Self-signed cert."
    }
}
